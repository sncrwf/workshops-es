"use strict";(self.webpackChunkCreatorWorkflowsNow=self.webpackChunkCreatorWorkflowsNow||[]).push([[927],{3905:(e,a,t)=>{t.d(a,{Zo:()=>p,kt:()=>g});var o=t(67294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,o)}return t}function n(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,o,r=function(e,a){if(null==e)return{};var t,o,r={},s=Object.keys(e);for(o=0;o<s.length;o++)t=s[o],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)t=s[o],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var d=o.createContext({}),l=function(e){var a=o.useContext(d),t=a;return e&&(t="function"==typeof e?e(a):n(n({},a),e)),t},p=function(e){var a=l(e.components);return o.createElement(d.Provider,{value:a},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var a=e.children;return o.createElement(o.Fragment,{},a)}},u=o.forwardRef((function(e,a){var t=e.components,r=e.mdxType,s=e.originalType,d=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),m=l(t),u=r,g=m["".concat(d,".").concat(u)]||m[u]||c[u]||s;return t?o.createElement(g,n(n({ref:a},p),{},{components:t})):o.createElement(g,n({ref:a},p))}));function g(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var s=t.length,n=new Array(s);n[0]=u;var i={};for(var d in a)hasOwnProperty.call(a,d)&&(i[d]=a[d]);i.originalType=e,i[m]="string"==typeof e?e:r,n[1]=i;for(var l=2;l<s;l++)n[l]=t[l];return o.createElement.apply(null,n)}return o.createElement.apply(null,t)}u.displayName="MDXCreateElement"},74422:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>d,contentTitle:()=>n,default:()=>c,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var o=t(87462),r=(t(67294),t(3905));const s={id:"optional-lab-section-1",title:"Laborat\xf3rio Opcional: Se\xe7\xe3o 1",pagination_label:"Laborat\xf3rio Opcional: Se\xe7\xe3o 1",sidebar_label:"Se\xe7\xe3o 1",hide_table_of_contents:!0,draft:!1},n=void 0,i={unversionedId:"optional-lab-section-1",id:"optional-lab-section-1",title:"Laborat\xf3rio Opcional: Se\xe7\xe3o 1",description:"Vis\xe3o Geral",source:"@site/labs/spokegen/10-optional-lab-section-1.md",sourceDirName:".",slug:"/optional-lab-section-1",permalink:"/workshops/labs/spokegen/optional-lab-section-1",draft:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{id:"optional-lab-section-1",title:"Laborat\xf3rio Opcional: Se\xe7\xe3o 1",pagination_label:"Laborat\xf3rio Opcional: Se\xe7\xe3o 1",sidebar_label:"Se\xe7\xe3o 1",hide_table_of_contents:!0,draft:!1},sidebar:"spokegen",previous:{title:"Use o Spoke em um Fluxo",permalink:"/workshops/labs/spokegen/use-spoke-in-a-flow"},next:{title:"Laborat\xf3rio Opcional: Se\xe7\xe3o 2",permalink:"/workshops/labs/spokegen/optional-lab-section-2"}},d={},l=[{value:"Vis\xe3o Geral",id:"vis\xe3o-geral",level:2},{value:"Instru\xe7\xf5es",id:"instru\xe7\xf5es",level:2}],p={toc:l},m="wrapper";function c(e){let{components:a,...s}=e;return(0,r.kt)(m,(0,o.Z)({},p,s,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"vis\xe3o-geral"},"Vis\xe3o Geral"),(0,r.kt)("p",null,"Lidar com integra\xe7\xf5es muitas vezes n\xe3o \xe9 t\xe3o simples quanto este laborat\xf3rio pode sugerir. Na se\xe7\xe3o anterior do laborat\xf3rio, os dados foram enviados para a API no mesmo formato que estavam no ServiceNow. No entanto, neste cen\xe1rio, estamos enviando dados para uma API que espera que os dados estejam em um formato espec\xedfico. Neste laborat\xf3rio opcional, exploraremos como aplicar a transforma\xe7\xe3o de dados no Flow Designer antes de enviar os dados para a API externa."),(0,r.kt)("h2",{id:"instru\xe7\xf5es"},"Instru\xe7\xf5es"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Em sua inst\xe2ncia, v\xe1 at\xe9 o menu ",(0,r.kt)("strong",{parentName:"li"},"All"),' (1) e no filtro de navega\xe7\xe3o (2), digite "x_snc_visitoracc_0_visitors_list.do" e pressione Enter para abrir essa tabela personalizada.\n',(0,r.kt)("img",{alt:"Alt text",src:t(98644).Z,width:"349",height:"239"}))),(0,r.kt)("p",null,"Neste caso de uso, uma tabela personalizada \xe9 utilizada por um aplicativo ServiceNow desenvolvido pela ACME Inc. Quando um visitante se registra na recep\xe7\xe3o do pr\xe9dio, ele pode escanear seu documento de identidade. Usando nossa capacidade DocIntel, um novo registro \xe9 gerado nessa tabela para o visitante. Informa\xe7\xf5es como o Primeiro Nome, Sobrenome e Data de Nascimento do visitante s\xe3o ent\xe3o extra\xeddas do documento de identidade e armazenadas nessa tabela. Na se\xe7\xe3o seguinte, nos concentraremos em criar o fluxo que pegar\xe1 esses dados, os transformar\xe1 e os utilizar\xe1 com o novo spoke que criamos anteriormente neste laborat\xf3rio."),(0,r.kt)("p",null,"Observe os seguintes detalhes: os valores de Primeiro Nome e Sobrenome do Visitante (1) est\xe3o em mai\xfasculas. Al\xe9m disso, observe a Data de Nascimento (2), que est\xe1 no formato MM/DD/YYYY."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Alt text",src:t(29774).Z,width:"1330",height:"233"})),(0,r.kt)("p",null,"A API externa para a qual criamos anteriormente uma nova a\xe7\xe3o de spoke n\xe3o reconhecer\xe1 esses valores nesse formato. A API espera o formato como Primeiro Nome, Sobrenome e uma data no formato YYYY-MM-DD."),(0,r.kt)("p",null,"Agora, vamos criar o fluxo que ir\xe1 consultar a API para verificar se o usu\xe1rio tem a autoriza\xe7\xe3o necess\xe1ria para acessar o pr\xe9dio. Usaremos um Data Transform e nossa nova Spoke Action para isso."),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Abra o Flow Designer\n",(0,r.kt)("img",{alt:"Alt text",src:t(63146).Z,width:"295",height:"233"}))),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Clique em ",(0,r.kt)("strong",{parentName:"li"},"Create new")," (1) e depois em ",(0,r.kt)("strong",{parentName:"li"},"Flow")," (2)\n",(0,r.kt)("img",{alt:"Alt text",src:t(56346).Z,width:"946",height:"216"}))),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Digite o valor ",(0,r.kt)("strong",{parentName:"li"},"Verify Access Request")," no campo ",(0,r.kt)("strong",{parentName:"li"},"Flow Name")," (1) e depois clique em ",(0,r.kt)("strong",{parentName:"li"},"Submit")," (2)\n",(0,r.kt)("img",{alt:"Alt text",src:t(43479).Z,width:"571",height:"434"}))),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"Se voc\xea receber essa mensagem, clique em ",(0,r.kt)("strong",{parentName:"li"},"Skip tour"),(0,r.kt)("img",{alt:"Alt text",src:t(22644).Z,width:"477",height:"347"}))),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},"Clique em ",(0,r.kt)("strong",{parentName:"li"},"Add a trigger")," (1) para definir a condi\xe7\xe3o que acionar\xe1 esse fluxo.\n",(0,r.kt)("img",{alt:"Alt text",src:t(3637).Z,width:"335",height:"284"}))),(0,r.kt)("ol",{start:7},(0,r.kt)("li",{parentName:"ol"},"Selecione ",(0,r.kt)("strong",{parentName:"li"},"Record")," (1) e depois clique em ",(0,r.kt)("strong",{parentName:"li"},"Updated")," (2).\n",(0,r.kt)("img",{alt:"Alt text",src:t(31786).Z,width:"784",height:"312"}))),(0,r.kt)("ol",{start:8},(0,r.kt)("li",{parentName:"ol"},"Selecione a tabela ",(0,r.kt)("strong",{parentName:"li"},"visitors")," (1) da lista e clique em ",(0,r.kt)("strong",{parentName:"li"},"Add Filters")," (2). Defina a condi\xe7\xe3o conforme mostrado abaixo\n",(0,r.kt)("img",{alt:"Alt text",src:t(48211).Z,width:"746",height:"278"}))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Com a condi\xe7\xe3o que estamos definindo acima, o fluxo ser\xe1 acionado assim que o DocIntel extrair dados do documento de identidade do visitante e atualizar o registro do visitante associado a esse visitante.")),(0,r.kt)("p",null,"Agora precisamos adicionar ao nosso fluxo a a\xe7\xe3o de spoke que criamos anteriormente neste laborat\xf3rio."),(0,r.kt)("ol",{start:9},(0,r.kt)("li",{parentName:"ol"},"Na se\xe7\xe3o ",(0,r.kt)("strong",{parentName:"li"},"Actions"),", clique em ",(0,r.kt)("strong",{parentName:"li"},"Action")," (1), digite ",(0,r.kt)("strong",{parentName:"li"},"visitor access")," (2) e depois selecione ",(0,r.kt)("strong",{parentName:"li"},"Visitor Access")," na lista de ",(0,r.kt)("strong",{parentName:"li"},"INSTALLED SPOKES")," (3) e clique em ",(0,r.kt)("strong",{parentName:"li"},"Check if a user exists")," (4)\n",(0,r.kt)("img",{alt:"Alt text",src:t(5455).Z,width:"564",height:"380"}))),(0,r.kt)("p",null,"Voc\xea deve ver uma tela como a mostrada abaixo"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Alt text",src:t(87164).Z,width:"974",height:"348"})),(0,r.kt)("p",null,"Precisamos passar os dados do registro para essa etapa de A\xe7\xe3o."),(0,r.kt)("ol",{start:10},(0,r.kt)("li",{parentName:"ol"},"Expanda a se\xe7\xe3o Visitors Record nos data pills conforme mostrado abaixo:\n",(0,r.kt)("img",{alt:"Alt text",src:t(84993).Z,width:"1007",height:"507"}))),(0,r.kt)("ol",{start:11},(0,r.kt)("li",{parentName:"ol"},"Em seguida, role para baixo para ver os campos que precisamos: ",(0,r.kt)("strong",{parentName:"li"},"visitor dob"),", ",(0,r.kt)("strong",{parentName:"li"},"visitor lastname"),", ",(0,r.kt)("strong",{parentName:"li"},"visitor firstname"),".")),(0,r.kt)("ol",{start:12},(0,r.kt)("li",{parentName:"ol"},"Pegue esses campos de dados e arraste-os para as entradas da nossa a\xe7\xe3o conforme mostrado abaixo:")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Alt text",src:t(94381).Z,width:"971",height:"237"})),(0,r.kt)("p",null,"Lembre-se, a API externa n\xe3o aceitar\xe1 o formato desses dados. Precisamos aplicar uma transforma\xe7\xe3o de dados para enviar os dados no formato esperado. No Flow Designer, podemos usar 'Transforms' para modificar dinamicamente os dados nos campos."),(0,r.kt)("p",null,"Vamos come\xe7ar com a formata\xe7\xe3o da data de nascimento. Lembre-se de que no registro do ServiceNow, o formato da data \xe9 MM/DD/YYYY, mas precisamos envi\xe1-lo para a API no formato YYYY-MM-DD."),(0,r.kt)("ol",{start:13},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Se voc\xea clicar no valor no campo ",(0,r.kt)("strong",{parentName:"p"},"dateofbirth"),", ser\xe1 exibido um \xedcone ",(0,r.kt)("strong",{parentName:"p"},"fx"),". Clique nele e depois digite ",(0,r.kt)("strong",{parentName:"p"},"Replace")," (2), em seguida, selecione ",(0,r.kt)("strong",{parentName:"p"},"Replace String")," (3). Com os Transforms, podemos usar uma express\xe3o regular simples para corresponder \xe0 string a ser substitu\xedda."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Alt text",src:t(27556).Z,width:"567",height:"214"})))),(0,r.kt)("ol",{start:14},(0,r.kt)("li",{parentName:"ol"},"No campo ",(0,r.kt)("strong",{parentName:"li"},"Regex")," (1) digite este valor ",(0,r.kt)("strong",{parentName:"li"},"(\\d{2})/(\\d{2})/(\\d{4})")," e no campo ",(0,r.kt)("strong",{parentName:"li"},"Replace String")," (2) digite este valor ",(0,r.kt)("strong",{parentName:"li"},"$3-$1-$2"),(0,r.kt)("img",{alt:"Alt text",src:t(19943).Z,width:"814",height:"440"}))),(0,r.kt)("admonition",{title:"Leitura adicional, se voc\xea estiver interessado em aprender mais sobre express\xf5es regulares, caso contr\xe1rio, pule isso.",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"O padr\xe3o regex ",(0,r.kt)("inlineCode",{parentName:"p"},"(\\d{2})/(\\d{2})/(\\d{4})")," \xe9 usado para corresponder e capturar strings de data no formato MM/DD/YYYY. "),(0,r.kt)("p",{parentName:"admonition"},"Aqui est\xe1 o que cada parte do padr\xe3o faz:"),(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"(\\d{2})"),": Esta parte captura dois d\xedgitos (0-9) e os coloca entre par\xeanteses para criar um grupo de captura. \xc9 usado para corresponder \xe0 parte do m\xeas da data (MM). ",(0,r.kt)("inlineCode",{parentName:"li"},"\\d")," representa qualquer d\xedgito, e ",(0,r.kt)("inlineCode",{parentName:"li"},"{2}")," especifica que exatamente dois d\xedgitos devem ser correspondidos.")),(0,r.kt)("ol",{parentName:"admonition",start:2},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"/"),": Esta parte corresponde ao caractere barra (/) literalmente. \xc9 usado para separar as partes do m\xeas, dia e ano da data.")),(0,r.kt)("ol",{parentName:"admonition",start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"(\\d{2})"),": Semelhante \xe0 primeira parte, isso captura dois d\xedgitos (0-9) para corresponder \xe0 parte do dia da data (DD).")),(0,r.kt)("ol",{parentName:"admonition",start:4},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"/"),": Outra barra para separar o dia e o ano.")),(0,r.kt)("ol",{parentName:"admonition",start:5},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"(\\d{4})"),": Isso captura quatro d\xedgitos (0-9) para corresponder \xe0 parte do ano da data (YYYY).")),(0,r.kt)("p",{parentName:"admonition"},"Assim, quando voc\xea aplica esse padr\xe3o regex a uma string, ele captura strings de data no formato MM/DD/YYYY e armazena as partes do m\xeas, dia e ano como grupos de captura separados, permitindo que voc\xea extraia e trabalhe com esses componentes individualmente."),(0,r.kt)("p",{parentName:"admonition"},"No campo de string de substitui\xe7\xe3o digitamos ",(0,r.kt)("strong",{parentName:"p"},"$3-$1-$2")),(0,r.kt)("p",{parentName:"admonition"},'$3 refere-se ao conte\xfado do grupo de captura 3, que \xe9 o ano "2023."\n$1 refere-se ao conte\xfado do grupo de captura 1, que \xe9 o m\xeas "12."\n$2 refere-se ao conte\xfado do grupo de captura 2, que \xe9 o dia "31."'),(0,r.kt)("p",{parentName:"admonition"},"Isso nos permite formatar a data como desejado, embora possa haver outras maneiras de conseguir isso tamb\xe9m.")),(0,r.kt)("p",null,"Agora, vamos realizar uma transforma\xe7\xe3o de dados para os campos Primeiro Nome e Sobrenome. Eles chegam em mai\xfasculas do ServiceNow, mas a API externa espera esses valores com apenas a primeira letra do primeiro nome e a primeira letra do sobrenome em mai\xfasculas. Portanto, precisamos transformar os dados para torn\xe1-los compat\xedveis. Podemos usar os Transforms existentes para isso, mas queremos introduzir outro m\xe9todo para uma transforma\xe7\xe3o de dados mais avan\xe7ada. Voc\xea pode usar o recurso de script inline no campo para transformar os dados."),(0,r.kt)("ol",{start:15},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Ao lado do campo firstname, clique no \xedcone Toggle Scripting conforme mostrado abaixo\n",(0,r.kt)("img",{alt:"Alt text",src:t(19136).Z,width:"604",height:"299"})),(0,r.kt)("p",{parentName:"li"},"adicione este c\xf3digo: "),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// Acesse o valor que voc\xea deseja transformar\nvar inputString = fd_data.trigger.current.visitor_firstname; // Substitua 'your_field_name' pelo nome real do campo\n\n// Verifique se o inputString n\xe3o est\xe1 vazio\nif (inputString) {\n   // Converta a string para\n")))))}c.isMDXComponent=!0},98644:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_12-01-25-5862737ce06378092bc16b3c97f83dfb.png"},29774:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_12-27-20-5419c9f1795d9f7d4c35375560392a97.png"},63146:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_12-35-12-74d01c2b4ccb2f5445d78627e8a2e6ff.png"},56346:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_12-37-28-c08f8c96ce81c0b39063ddb63f679dbe.png"},43479:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_12-39-32-9dc05e6021e0f5788c1882b3dfadcd29.png"},22644:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_12-41-26-6c6b8ca67a98c1dfc3dc7ed63b8f275f.png"},3637:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_12-42-11-1d4630227818d34992420847bf07aead.png"},31786:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_12-43-19-572da7bbcf7d830a354a3045eab5ec2d.png"},48211:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_12-46-22-d26ad3570d4ddf36536b22aac83e3045.png"},5455:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_12-50-00-de81a60b0d48687b1b94069867d74091.png"},87164:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_12-52-53-c97560c8184020384fd9be89b591da67.png"},84993:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_12-56-25-623acb62e93f52f2d046d38facd5becc.png"},94381:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_13-02-10-e4a4513493f2b0cb69fc1a7e383166ea.png"},27556:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_13-08-32_2-af09da8b18a9a84b92d07f8a88d8401a.png"},19943:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_13-15-37-6492d45a8f0b78788033d8ef66ca6cba.png"},19136:(e,a,t)=>{t.d(a,{Z:()=>o});const o=t.p+"assets/images/2023-09-21_13-26-47-2ad52c0cfef576c2fdecf9de98d4691e.png"}}]);